<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Ride Map&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body { margin:0; padding:0; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>#map { position:absolute; top:0; bottom:0; width:100%; height:100%; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1">&lt;div id="map"&gt;&lt;/div&gt;</p>
<p class="p1">&lt;script&gt;</p>
<p class="p1">mapboxgl.accessToken = 'pk.eyJ1IjoidG9tdmFuYXJtYW4iLCJhIjoiRDlFeWFVdyJ9.B6ZgpP0CsDlAF1D1emvosg';</p>
<p class="p2"><br></p>
<p class="p1">const map = new mapboxgl.Map({</p>
<p class="p1"><span class="Apple-converted-space">  </span>container: 'map',</p>
<p class="p1"><span class="Apple-converted-space">  </span>style: 'mapbox://styles/tomvanarman/cmdlugpsh003401s93pou1z8m',</p>
<p class="p1"><span class="Apple-converted-space">  </span>center: [4.895, 52.37],</p>
<p class="p1"><span class="Apple-converted-space">  </span>zoom: 12</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">map.on('load', async () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">  </span>const resp = await fetch('https://tomvanarman.github.io/Reflector-Ride-Maps/track_segments.geojson');</p>
<p class="p1"><span class="Apple-converted-space">  </span>const data = await resp.json();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>map.addSource('ride-segments', { type: 'geojson', data });</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>map.addLayer({</p>
<p class="p1"><span class="Apple-converted-space">    </span>id: 'ride-colored-by-speed',</p>
<p class="p1"><span class="Apple-converted-space">    </span>type: 'line',</p>
<p class="p1"><span class="Apple-converted-space">    </span>source: 'ride-segments',</p>
<p class="p1"><span class="Apple-converted-space">    </span>paint: {</p>
<p class="p1"><span class="Apple-converted-space">      </span>'line-width': 4,</p>
<p class="p1"><span class="Apple-converted-space">      </span>'line-color': [</p>
<p class="p1"><span class="Apple-converted-space">        </span>'interpolate',</p>
<p class="p1"><span class="Apple-converted-space">        </span>['linear'],</p>
<p class="p1"><span class="Apple-converted-space">        </span>['coalesce', ['get', 'speed_kmh'], 0],</p>
<p class="p1"><span class="Apple-converted-space">        </span>0, <span class="Apple-converted-space">  </span>'#4575b4',</p>
<p class="p1"><span class="Apple-converted-space">        </span>10,<span class="Apple-converted-space">  </span>'#91bfdb',</p>
<p class="p1"><span class="Apple-converted-space">        </span>20,<span class="Apple-converted-space">  </span>'#e0f3f8',</p>
<p class="p1"><span class="Apple-converted-space">        </span>25,<span class="Apple-converted-space">  </span>'#ffffbf',</p>
<p class="p1"><span class="Apple-converted-space">        </span>30,<span class="Apple-converted-space">  </span>'#fee090',</p>
<p class="p1"><span class="Apple-converted-space">        </span>35,<span class="Apple-converted-space">  </span>'#fc8d59',</p>
<p class="p1"><span class="Apple-converted-space">        </span>40,<span class="Apple-converted-space">  </span>'#d73027'</p>
<p class="p1"><span class="Apple-converted-space">      </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>// Fit map to data</p>
<p class="p1"><span class="Apple-converted-space">  </span>const bounds = new mapboxgl.LngLatBounds();</p>
<p class="p1"><span class="Apple-converted-space">  </span>data.features.forEach(f =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (f.geometry.type === 'LineString') {</p>
<p class="p1"><span class="Apple-converted-space">      </span>f.geometry.coordinates.forEach(c =&gt; bounds.extend(c));</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>if (!bounds.isEmpty()) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>map.fitBounds(bounds, { padding: 40, maxZoom: 16 });</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p1">});</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
